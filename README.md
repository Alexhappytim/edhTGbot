# Требования к информационной системе проведения турниров MTG по швейцарской системе (Telegram-бот)

## 1. Описание предметной области

**Magic: The Gathering (MTG)** — коллекционная карточная игра, для которой часто проводятся турниры. Одним из наиболее распространённых форматов является **швейцарская система**, предполагающая:

- фиксированное число раундов
- матчи bo3 (best of three)
- случайное распределение игроков в первом раунде
- распределение в последующих раундах по текущим результатам
- начисление очков: победа — 3, ничья — 1, поражение — 0
- составление турнирной таблицы и её обновление после каждого раунда

Проведение турниров вручную или через сторонние приложения вызывает ряд проблем:
- высокая вероятность ошибок в таблице
- сложность ведения матчей
- отсутствие удобства для игроков
- затруднённая работа в онлайн-сообществах
- для некоторых форматов игры не возможно пользоваться классическими приложениями

Информационная система в виде **Telegram-бота** устраняет эти проблемы, автоматизирует проведение турниров и делает их доступными в любом чате.

---

## 2. Назначение информационной системы и решаемые задачи

Система предназначена для автоматизации организации и проведения турниров по MTG с использованием швейцарской системы.

### Задачи, которые позволяет решить система:

### 2.1. Автоматизация турнирного процесса
- Удобное создание турниров
- Исключение ошибок при составлении пар
- Автоматический подсчёт таблицы и очков

### 2.2. Удобство для игроков
- Присоединение к турниру прямо в Telegram
- Ввод результатов через команды бота
- Прозрачный процесс распределения пар

### 2.3. Уменьшение нагрузки на организатора
- Автоматизация всех расчётов
- Организатор выполняет только старт и утверждение результатов

### 2.4. Прозрачность
- Хранение всех действий в системе
- Доступ к таблице для всех игроков
- Доступ к истории матчей и статистики для пользователей
---

## 3. Требования к информационной системе

### FR1. Регистрация и идентификация
- Система должна позволять пользователю автоматически идентифицироваться по его Telegram ID
- Система должна позволять пользователю изменить своё отображаемое имя (игровой ник)

### FR2. Создание и управление турнирами
- Система должна позволять пользователю создать новый турнир
- Система должна позволять пользователю задать параметры турнира: название, количество раундов, ограничения по игрокам и дополнительные настройки
- Система должна позволять пользователю, создавшему турнир, выступать в роли организатора и управлять им

### FR3. Присоединение к турнирам
- Система должна позволять пользователю присоединиться к любому открытому, ещё не запущенному турниру
- Система должна позволять организатору удалять участников до начала турнира

### FR4. Запуск турнира
- Система должна позволять пользователю-организатору запустить турнир
- Система должна оповещать пользователей о том, в каких парах они играют
- Система должна запрещать присоединение новых игроков после запуска турнира

### FR5. Формирование пар раунда
- Система должна позволять пользователю получить автоматически сформированные пары для текущего раунда
- Система должна автоматически распределять игроков по парам согласно правилам швейцарской системы
- Система должна предотвращать повторные встречи между одними и теми же игроками
- Система должна автоматически назначать «bye» игроку при нечётном количестве участников

### FR6. Ввод результатов матчей
- Система должна позволять пользователю отправлять результат сыгранного матча
- Система должна позволять организатору корректировать ошибочно введённые результаты
- Система должна автоматически пересчитывать турнирную таблицу после завершения всех матчей раунда

### FR7. Просмотр турнирной таблицы
- Система должна позволять пользователю запросить и просмотреть актуальную турнирную таблицу
- Система должна отображать очки, победы, поражения, дополнительные коэффициенты (tiebreaks)

### FR8. Завершение турнира
- Система должна позволять пользователю просмотреть итоговые результаты турнира
- Система должна завершать турнир после последнего раунда и фиксировать итоговую таблицу

---

### 3.2. Нефункциональные требования

#### NFR1. Надёжность
- Сохранение данных даже при перезапуске
- Возможность восстановления состояния турнира

#### NFR2. Производительность
- Формирование пар ≤ 3 секунд
- Ответ бота ≤ 1 секунды

#### NFR3. Масштабируемость
- Поддержка нескольких турниров одновременно
- Возможность работы с 64–128 участниками

#### NFR4. Юзабилити
- Доступность всех команд через меню Telegram
- Простота и понятность интерфейса

#### NFR5. Безопасность
- Доступ к управлению только у организатора
- Все действия привязаны к Telegram ID

---

## 4. Модели основных прецедентов

### Перечень прецедентов:
1. UC01 — Создать турнир  
2. UC02 — Присоединиться к турниру  
3. UC03 — Запустить турнир  
4. UC04 — Получить пары раунда  
5. UC05 — Ввести результат матча  
6. UC06 — Просмотреть турнирную таблицу  
7. UC07 — Начать новый раунд  

---

## 4.1. UC01 — Создание турнира

**Актор:** Пользователь (Организатор)

**Цель:** Создать новый турнир.

**Предусловия:** Пользователь авторизован.

**Сценарий:**
1. Отправляет `/create_tournament`.
2. Система запрашивает параметры.
3. Пользователь вводит параметры.
4. Система создаёт турнир.
5. Система подтверждает создание.

**Постусловие:** Турнир создан и доступен.

---

## 4.2. UC02 — Присоединение к турниру

**Актор:** Пользователь

**Цель:** Присоединиться к турниру.

**Предусловия:** Турнир не запущен, пользователь авторизован.

**Сценарий:**
1. Команда `/join <id>`.
2. Система проверяет статус турнира.
3. Система добавляет игрока.
4. Система подтверждает регистрацию в турнире.

**Альтернативный сценарий:**
3. Система выдает ошибку "турнир уже идет"
---

## 4.3. UC03 — Запуск турнира

**Актор:** Организатор

**Цель:** Начать турнир.

**Сценарий:**
1. Команда `/start_tournament`.
2. Проверка числа игроков.
3. Формирование 1-го раунда.
4. Уведомление участников.

---

## 4.4. UC04 — Получение пар раунда

**Актор:** Участник/Организатор

**Цель:** Посмотреть текущие пары.

**Сценарий:**
1. Команда `/pairs`.
2. Вывод списка пар.

---

## 4.5. UC05 — Ввод результата матча

**Актор:** Участник / Организатор

**Цель:** Ввести или изменить результат.

**Сценарий:**
1. Команда `/result <opponent> <score>`.
2. Проверка корректности.
3. Запись результата.
4. Обновление таблицы после завершения всех матчей раунда.

---

## 4.6. UC06 — Просмотр турнирной таблицы

**Актор:** Любой пользователь

**Цель:** Посмотреть результаты.

**Сценарий:**
1. Команда `/standings`.
2. Вывод таблицы.

---

## 4.7. UC07 — Начало нового раунда

**Актор:** Организатор

**Цель:** Сформировать новый раунд.

**Сценарий:**
1. Команда `/new_round`.
2. Проверка завершения предыдущего раунда.
3. Генерация пар.
4. Уведомление участников.
